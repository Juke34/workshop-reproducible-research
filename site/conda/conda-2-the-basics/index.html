<!DOCTYPE html>
<html lang="en">
	<head>
		
		
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<meta name="author" content="Jacques Dainat et al.">
		<link rel="canonical" href="https://Juke34.github.io/workshop-reproducible-research/conda/conda-2-the-basics/">
		<link rel="shortcut icon" href="../../img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>The basics - Bioinformatics Workshop on Tools for Reproducible Research</title>
		<link href="../../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="../../css/font-awesome-5.12.2-all.min.css" rel="stylesheet">
		<link href="../../css/base.css" rel="stylesheet">
		<link rel="stylesheet" href="../../css/highlight-github.css">
		<script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="../../js/highlight.pack.js"></script>
		
		<script>
			var base_url = '../..';
			var home_url = '../../usage';
			var is_outer_page = false;
			
			var pageToc = [
				{title: "Creating Conda environments", url: "#_top", children: [
				]},
				{title: "Adding more packages", url: "#adding-more-packages", children: [
				]},
				{title: "Removing packages", url: "#removing-packages", children: [
				]},
			];

		</script>
		<script src="../../js/base.js"></script> 
	</head>

	<body class="inner-page">
		

		<div class="container-fluid wm-page-content">
			<a name="_top" aria-hidden="true"></a>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../conda-1-introduction/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../conda-1-introduction/" class="btn btn-sm btn-link">
			Introduction
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../conda-3-projects/" class="btn btn-sm btn-link">
			Projects
		</a>
		<a href="../conda-3-projects/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			

			<p>Let's assume that you are just about to start a new exciting research project
called <em>Project A</em>.</p>
<h1 id="creating-conda-environments">Creating Conda environments<a class="headerlink" href="#creating-conda-environments" title="Permanent link">#</a></h1>
<ul>
<li>Let's make our first Conda environment:</li>
</ul>
<pre><code class="language-bash">conda create -n project_a -c bioconda fastqc
</code></pre>
<p>This will create an environment called <code>project_a</code>, containing FastQC from the
Bioconda channel. Conda will list the packages that will be installed and ask
for your confirmation.</p>
<ul>
<li>Once it is done, you can activate the environment:</li>
</ul>
<pre><code class="language-bash">conda activate project_a
</code></pre>
<p>By default, Conda will add information to your prompt telling you which
environment that is active.</p>
<ul>
<li>To see all your environments you can run:</li>
</ul>
<pre><code class="language-bash">conda info --envs
</code></pre>
<p>The active environment will be marked with an asterisk.</p>
<ul>
<li>To see the installed packages and their versions in the active environment,
  run:</li>
</ul>
<pre><code class="language-bash">conda list
</code></pre>
<ul>
<li>To save the installed packages to a file, run:</li>
</ul>
<pre><code class="language-bash">conda env export --from-history &gt; environment.yml
</code></pre>
<p>where <code>--from-history</code> only reports the packages requested to be installed 
and not additional dependancies. A caveat is that if no version was 
originally specified, then it is not included in the export file either.</p>
<ul>
<li>Now, deactivate the environment by running <code>conda deactivate</code>.</li>
<li>List all environments again. Which environment is now marked as active?</li>
<li>Try to run FastQC:</li>
</ul>
<pre><code class="language-bash">fastqc --version
</code></pre>
<ul>
<li>Did it work? Activate your <code>project_a</code> environment and run the <code>fastqc
  --version</code> command again. Does it work now?</li>
</ul>
<p>Hopefully the FastQC software was not found in your base environment (unless
you had installed it previously), but worked once your environment was
activated.</p>
<h1 id="adding-more-packages">Adding more packages<a class="headerlink" href="#adding-more-packages" title="Permanent link">#</a></h1>
<ul>
<li>Now, let's add another package (<em>SRA-Tools</em>) to our environment using <code>conda
  install</code>. Make sure that <code>project_a</code> is the active environment first.</li>
</ul>
<pre><code class="language-bash">conda install -c bioconda sra-tools
</code></pre>
<ul>
<li>If we don't specify the package version, the latest available version will be
  installed. What version of SRA-Tools got installed?</li>
<li>Run the following to see what versions are available:</li>
</ul>
<pre><code class="language-bash">conda search -c bioconda sra-tools
</code></pre>
<ul>
<li>Now try to install a different version of SRA-Tools, <em>e.g.</em>:</li>
</ul>
<pre><code class="language-bash">conda install -c bioconda sra-tools=2.7.0
</code></pre>
<p>Read the information that Conda displays in the terminal. It probably asks if
you want to downgrade the initial SRA-Tools installation to the one specified
here (<code>2.7.0</code> in the example). You can only have one version of a given package
in a given environment.</p>
<p>Let's assume that you will have sequencing data in your Project A, and want to
use the latest Bowtie2 software to align your reads.</p>
<ul>
<li>Find out what versions of Bowtie2 are available in the Bioconda channel using
  <code>conda search -c bioconda</code>.</li>
<li>Now install the <em>latest</em> available version of Bowtie2 in your <code>project_a</code>
  environment.</li>
</ul>
<p>Let's further assume that you have an old project (called <em>Project Old</em>) where
you know you used Bowtie2 <code>2.2.5</code>. You just got back reviewer comments and they
want you to include some alignment statistics. Unfortunately, you haven't saved
that information so you will have to rerun the alignment. Now, it is essential
that you use the same version of Bowtie that your results are based on,
otherwise the alignment statistics will be misleading. Using Conda environments
this becomes simple. You can just have a separate environment for your old
project where you have an old version of Bowtie2 without interfering with your
new Project A where you want the latest version.</p>
<ul>
<li>Make a new environment for your old project:</li>
</ul>
<pre><code class="language-bash">conda create -n project_old -c bioconda bowtie2=2.2.5
</code></pre>
<ul>
<li>List your environments (do you remember the command?).</li>
<li>Activate <code>project_old</code> and check the Bowtie2 version (<code>bowtie2 --version</code>).</li>
<li>Activate <code>project_a</code> again and check the Bowtie2 version.</li>
</ul>
<h1 id="removing-packages">Removing packages<a class="headerlink" href="#removing-packages" title="Permanent link">#</a></h1>
<p>Now let's try to remove an installed package from the active environment:</p>
<pre><code>conda remove sra-tools
</code></pre>
<ul>
<li>Run <code>conda deactivate</code> to exit your active environment.</li>
<li>Now, let's remove an environment:</li>
</ul>
<pre><code class="language-bash">conda env remove -n project_old
</code></pre>
<p>After making a few different environments and installing a bunch of packages,
Conda can take up some disk space. You can remove unnecessary files with the
command:</p>
<pre><code class="language-bash">conda clean -a
</code></pre>
<p>This will remove package tar-balls that are left from package installations,
unused packages (<em>i.e.</em> those not present in any environments), and cached
data.</p>
<blockquote>
<p><strong>Quick recap</strong> <br>
In this section we've learned:</p>
<ul>
<li>How to use <code>conda install</code> for installing packages on the fly.</li>
<li>How to create, activate and change between environments.</li>
<li>How to remove packages or environments and clean up.</li>
</ul>
</blockquote>

			<br>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../conda-1-introduction/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../conda-1-introduction/" class="btn btn-sm btn-link">
			Introduction
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../conda-3-projects/" class="btn btn-sm btn-link">
			Projects
		</a>
		<a href="../conda-3-projects/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			<br>
		</div>

		<footer class="container-fluid wm-page-content text-center small">
			<p>
			<a href="https://github.com/Juke34/workshop-reproducible-research/edit/master/docs/conda/conda-2-the-basics.md" target="_blank">Edit on workshop-reproducible-research</a>
			</p>
			<details>
				<summary>
					Documentation built with <a href="http://www.mkdocs.org/" target="_blank">MkDocs</a> using  <a href="https://github.com/Siphalor/mkdocs-custommill" target="_blank">CustomMill</a>.
				</summary>
				<h6 class="mt-2">Additional Licenses</h6>
				<ul><li>
						CustomMill is based on the <a href="https://github.com/gristlabs/mkdocs-windmill" target="_blank">Windmill</a> theme by Grist Labs, licensed under the <a href="https://github.com/gristlabs/mkdocs-windmill/blob/master/LICENSE" target="_blank">MIT License</a>
					</li>
					<li>
						CustomMill includes <a href="https://getbootstrap.com" target="_blank">Bootstrap</a> version 5.1.3. This is available under the <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" target="_blank">MIT License</a>.
					</li>
					<li>
						Syntax highlighting is implemented via <a href="https://highlightjs.org" target="_blank">highlight.js</a> licensed under the BSD 3-Clause License and the included github styling made by Vasily Polovnyov.
					</li>
					<li>
						Icons on this site are from <a href="https://fontawesome.com/" target="_blank">Font Awesome</a> which is licensed under the <a href="https://fontawesome.com/license/free" target="_blank">Font Awesome Free License</a>.
					</li></ul>
				<p>Built at 2023-02-10 16:41:13 UTC</p>
			</details>
		</footer>

		
	</body>
</html>