<!DOCTYPE html>
<html lang="en">
	<head>
		
		
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<meta name="author" content="Jacques Dainat et al.">
		<link rel="canonical" href="https://Juke34.github.io/workshop-reproducible-research/git/git-3-committing-changes/">
		<link rel="shortcut icon" href="../../img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>Committing changes - Bioinformatics Workshop on Tools for Reproducible Research</title>
		<link href="../../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="../../css/font-awesome-5.12.2-all.min.css" rel="stylesheet">
		<link href="../../css/base.css" rel="stylesheet">
		<link rel="stylesheet" href="../../css/highlight-github.css">
		<script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="../../js/highlight.pack.js"></script>
		
		<script>
			var base_url = '../..';
			var home_url = '../../usage';
			var is_outer_page = false;
			
			var pageToc = [
			];

		</script>
		<script src="../../js/base.js"></script> 
	</head>

	<body class="inner-page">
		

		<div class="container-fluid wm-page-content">
			<a name="_top" aria-hidden="true"></a>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../git-2-creating-repositories/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../git-2-creating-repositories/" class="btn btn-sm btn-link">
			Creating a git repository
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../git-4-ignoring-files/" class="btn btn-sm btn-link">
			Ignoring files
		</a>
		<a href="../git-4-ignoring-files/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			

			<p>We will now commit the untracked files. A commit is essentially a set of
changes to a set of files. Preferably, the changes making out a commit should
be related to something, <em>e.g.</em> a specific bug fix or a new feature.</p>
<ul>
<li>Our first commit will be to add the copied files to the repository. Run the
  following (as suggested by <code>git status</code>):</li>
</ul>
<pre><code class="language-bash">git add Dockerfile Snakefile
</code></pre>
<ul>
<li>
<p>Run <code>git status</code> again! See that we have added Dockerfile and Snakefile to
  our upcoming commit (listed under "<em>Changes to be committed</em>"). This is
  called the staging area, and the files there are staged to be committed.</p>
</li>
<li>
<p>We might as well commit all files in one go! Use <code>git add</code> on the remaining
  files as well:</p>
</li>
</ul>
<pre><code class="language-bash">git add config.yml environment.yml
</code></pre>
<ul>
<li>
<p>Run <code>git status</code> and see that all files are in the staging area, and that no
  files are listed as untracked.</p>
</li>
<li>
<p>We are now ready to commit! Run the following:</p>
</li>
</ul>
<pre><code class="language-bash">git commit -m &quot;Add initial files&quot;
</code></pre>
<p>The <code>-m</code> option adds a commit message. This should be a short description of
what the commit contains.</p>
<blockquote>
<p><strong>Good commit messages</strong> <br>
Writing informative and succinct commit messages can be tricky when you're
just starting out. Here are some general guidelines that can help you write
good commit messages from the start:</p>
<ul>
<li>Separate subject from body with a blank line</li>
<li>Limit the subject line to 50 characters</li>
<li>Capitalize the subject line</li>
<li>Do not end the subject line with a period</li>
<li>Use the <a href="https://en.wikipedia.org/wiki/Imperative_mood">imperative mood</a>
  in the subject line</li>
<li>Wrap the body at 72 characters</li>
<li>Use the body to explain <em>what</em> and <em>why</em> vs. <em>how</em></li>
</ul>
<p>In the command above we just added a short subject line ("Add initial
files"). It is capitalized, less than 50 characters, does not end with
a period, and uses imperative mood (Add!). It is possible to add
a descriptive body text as well, as hinted by the points above. This is
easiest done in a text editor. If you run <code>git commit</code> without the <code>-m</code>
flag, Git will open the default terminal text editor (which can be
configured with the <code>core.editor</code> variable) where you can write a longer
commit message and body. If you want to read more about the motivation for
these points, please see <a href="https://chris.beams.io/posts/git-commit/">this website</a>.</p>
</blockquote>
<ul>
<li>Run <code>git status</code> again. It should tell you <em>"nothing to commit, working
  directory clean"</em>.</li>
</ul>
<p>What have we done, so far? We had some files in our working directory that we
added to the Git staging area, which we subsequently committed to our Git
repository. A schematic overview of this process can be seen in the following
figure:</p>
<p><img alt="" src="images/git_overview_local.png" />{ width=600px }</p>
<p>Let's repeat this process by editing a file!</p>
<ul>
<li>
<p>Open up <code>environment.yml</code> in your favorite editor, and change the version of
  bowtie2 to a different value, <em>e.g.</em> <code>bowtie2=2.2.4</code>.</p>
</li>
<li>
<p>Run <code>git status</code>. It will tell you that there are modifications in one file
  (<code>environment.yml</code>) compared to the previous commit. This is nice! We don't
  have to keep track of which files we have edited, Git will do that for us.</p>
</li>
<li>
<p>Run <code>git diff environment.yml</code>. This will show you the changes made to the
  file. A <code>-</code> means a deleted line, a <code>+</code> means an added line. There are also
  shown a few lines before and after the changes, to put them in context.</p>
</li>
<li>
<p>Let's edit another file! Open <code>config.yml</code> and change the line <code>genome_id:
  NCTC8325</code> to <code>genome_id: ST398</code>. Run <code>git status</code>. Run <code>git diff</code>. If we
  don't specify a file, it will show all changes made in any file, compared to
  the previous commit. Do you see your changes?</p>
</li>
<li>
<p>Ok, we made our changes. Let's commit them! Run:</p>
</li>
</ul>
<pre><code class="language-bash">git add config.yml environment.yml
</code></pre>
<p>This will add both our files to the staging area at the same time. Run <code>git
status</code> and see that the changes in both <code>config.yml</code> and <code>environment.yml</code> are
ready to be committed.</p>
<p>But wait a minute! Shouldn't each commit optimally be a conceptual unit of
change? Here we have one change to the genome ID used for an analysis and one
change where another software version is specified: these should probably be
separate. We thus want to make two commits, one for each change.</p>
<ul>
<li>Let's remove <code>environment.yml</code> from the staging area. <code>git status</code> tells us
  how to do this: <em>"(use "git reset HEAD <file>..." to unstage)"</em>. So run:</li>
</ul>
<pre><code class="language-bash">git reset HEAD environment.yml
</code></pre>
<blockquote>
<p><strong>Note</strong> <br>
Maybe you didn't see the same message as indicated above? Is Git telling you
to use a <code>git restore</code> instead? This is another one of Git's newer and
experimental commands, which aims to remove some confusion about what
commands do what (as many have multiple functions). While we have opted to
stick with the old and stable commands until the new commands are no longer
considered experimental, you are very welcome to use <code>git restore</code> instead
of <code>git reset</code> to unstage the file above!</p>
</blockquote>
<ul>
<li>
<p>Run <code>git status</code> again. See that now only <code>config.yml</code> is staged for being
  committed, whereas the changes in <code>environment.yml</code> are tracked by Git, but
  not ready to be committed.</p>
</li>
<li>
<p>Commit the changes in <code>config.yml</code>:</p>
</li>
</ul>
<pre><code class="language-bash">git commit -m &quot;Change to ST398 for alignment&quot;
</code></pre>
<ul>
<li>Add and commit the changes in <code>environment.yml</code>:</li>
</ul>
<pre><code class="language-bash">git status
git add environment.yml
git status
git commit -m &quot;Change bowtie2 version&quot;
git status
</code></pre>
<p>You don't have to run <code>git status</code> between each command, but it can be useful
in the beginning while learning what each command does.</p>
<p>As you can see, each commit is a point in history. The more often you commit,
and the more specific you keep your commits, the better (more fine-grained)
history and version tracking you will have of your files.</p>
<ul>
<li>We can also try to delete a file:</li>
</ul>
<pre><code class="language-bash">rm Dockerfile
</code></pre>
<ul>
<li>Run <code>git status</code>. As you can see, Git tells us that the file is deleted, but
  that the deletion is not committed. In the same way as we commit edits to
  files, we need to commit a deletion of a file:</li>
</ul>
<pre><code class="language-bash">git add Dockerfile
git status
git commit -m &quot;Remove Dockerfile&quot;
git status
git log
</code></pre>
<p>Here we used <code>rm Dockerfile</code> to delete the file and <code>git add Dockerfile</code> to
stage the deletion. You can also use <code>git rm Dockerfile</code> to do both these
operations in one step.</p>
<ul>
<li>To see a history of our changes so far, run:</li>
</ul>
<pre><code class="language-bash">git log
</code></pre>
<blockquote>
<p><strong>Tip</strong> <br>
Since Git keeps track of changes in text, <em>e.g.</em> code and text-based
documentation, there are some files which you should <em>not</em> commit. Examples
of such files are file formats that are not text-based, <em>e.g.</em> Microsoft
Word/Excel files or PDFs - although one might sometimes want to track one of
these files regardless, such as when you have a static PDF report you
received from a sequencing platform that's never going to change. Other
files you shouldn't track are vary large text files, <em>e.g.</em> those larger
than 50 MB.</p>
<p><strong>Quick recap</strong> <br>
We added four important Git commands to our repertoire:</p>
<ul>
<li><code>git add</code> adds a file to the staging area</li>
<li><code>git commit</code> commits the changes we have staged</li>
<li><code>git rm</code> is shorthand for <code>rm &lt;file&gt;; git add &lt;file&gt;</code></li>
<li><code>git log</code> shows us the commit history</li>
</ul>
</blockquote>

			<br>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../git-2-creating-repositories/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../git-2-creating-repositories/" class="btn btn-sm btn-link">
			Creating a git repository
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../git-4-ignoring-files/" class="btn btn-sm btn-link">
			Ignoring files
		</a>
		<a href="../git-4-ignoring-files/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			<br>
		</div>

		<footer class="container-fluid wm-page-content text-center small">
			<p>
			<a href="https://github.com/Juke34/workshop-reproducible-research/edit/master/docs/git/git-3-committing-changes.md" target="_blank">Edit on workshop-reproducible-research</a>
			</p>
			<details>
				<summary>
					Documentation built with <a href="http://www.mkdocs.org/" target="_blank">MkDocs</a> using  <a href="https://github.com/Siphalor/mkdocs-custommill" target="_blank">CustomMill</a>.
				</summary>
				<h6 class="mt-2">Additional Licenses</h6>
				<ul><li>
						CustomMill is based on the <a href="https://github.com/gristlabs/mkdocs-windmill" target="_blank">Windmill</a> theme by Grist Labs, licensed under the <a href="https://github.com/gristlabs/mkdocs-windmill/blob/master/LICENSE" target="_blank">MIT License</a>
					</li>
					<li>
						CustomMill includes <a href="https://getbootstrap.com" target="_blank">Bootstrap</a> version 5.1.3. This is available under the <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" target="_blank">MIT License</a>.
					</li>
					<li>
						Syntax highlighting is implemented via <a href="https://highlightjs.org" target="_blank">highlight.js</a> licensed under the BSD 3-Clause License and the included github styling made by Vasily Polovnyov.
					</li>
					<li>
						Icons on this site are from <a href="https://fontawesome.com/" target="_blank">Font Awesome</a> which is licensed under the <a href="https://fontawesome.com/license/free" target="_blank">Font Awesome Free License</a>.
					</li></ul>
				<p>Built at 2023-02-10 16:41:13 UTC</p>
			</details>
		</footer>

		
	</body>
</html>