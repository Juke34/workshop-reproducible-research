<!DOCTYPE html>
<html lang="en">
	<head>
		
		
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<meta name="author" content="Jacques Dainat et al.">
		<link rel="canonical" href="https://Juke34.github.io/workshop-reproducible-research/jupyter/jupyter-5-widgets/">
		<link rel="shortcut icon" href="../../img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>Widgets - Bioinformatics Workshop on Tools for Reproducible Research</title>
		<link href="../../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="../../css/font-awesome-5.12.2-all.min.css" rel="stylesheet">
		<link href="../../css/base.css" rel="stylesheet">
		<link rel="stylesheet" href="../../css/highlight-github.css">
		<script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="../../js/highlight.pack.js"></script>
		
		<script>
			var base_url = '../..';
			var home_url = '../../usage';
			var is_outer_page = false;
			
			var pageToc = [
				{title: "Extra challenge", url: "#_top", children: [
				]},
				{title: "Other interactive plots", url: "#other-interactive-plots", children: [
				]},
			];

		</script>
		<script src="../../js/base.js"></script> 
	</head>

	<body class="inner-page">
		

		<div class="container-fluid wm-page-content">
			<a name="_top" aria-hidden="true"></a>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../jupyter-4-plotting/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../jupyter-4-plotting/" class="btn btn-sm btn-link">
			Plotting
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../jupyter-6-extensions/" class="btn btn-sm btn-link">
			Extensions
		</a>
		<a href="../jupyter-6-extensions/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			

			<p>Since we're typically running our notebooks in a web browser, they are quite
well suited for also including more interactive elements. A typical use case
could be that you want to communicate some results to a collaborator or to
a wider audience, and that you would like them to be able to modify how the
results are displayed. It could, for example, be to select which gene to plot
for, or to see how some parameter value affects a clustering. Jupyter notebooks
has great support for this in the form of <em>widgets</em>.</p>
<p>Widgets are eventful Python objects that have a representation in the browser,
often as a control like a slider, textbox, etc. These are implemented in the 
<code>ipywidgets</code> package.</p>
<p>The easiest way to get started with using widgets are via the <code>interact</code> and
<code>interactive</code> functions. These functions autogenerate widgets from functions
that you define, and then call those functions when you manipulate the widgets.
Too abstract? Let's put it into practice! </p>
<p>Let's try to add sliders that allow us to change the frequency, amplitude and
phase of the sine curve we plotted previously.</p>
<pre><code class="language-python"># Import the interactive function from ipywidgets
from ipywidgets import interactive
# Also import numpy (for calculating the sine curve) 
# and pyplot from matplotlib for plotting
import numpy as np
import matplotlib.pyplot as plt

# Define the function for plotting the sine curve
def sine_curve(A, f, p):
    # Set up the plot
    plt.figure(1, figsize=(4,4))
    # Create a range of 100 evenly spaced numbers between 0 and 100
    x = np.linspace(0,10,100)
    # Calculate the y values using the supplied parameters
    y = A*np.sin(x*f+p)
    # Plot the x and y values ('r-' specifies color and line style)
    plt.plot(x, y, color='red', linestyle=&quot;-&quot;)
    plt.show()

# Here we supply the sine_curve function to interactive, 
# and set some limits on the input parameters
interactive_plot = interactive(sine_curve, 
            A=(1, 5, 1), 
            f=(0, 5, 1), 
            p=(1, 5, 0.5))

# Display the widgets and the plot
interactive_plot
</code></pre>
<p>The code above defines a function called <code>sine_curve</code> which takes three 
arguments: </p>
<ul>
<li><code>A</code> = the amplitude of the curve</li>
<li><code>f</code> = the frequency of the curve</li>
<li><code>p</code> = the phase of the curve</li>
</ul>
<p>The function creates a plot area, generates x-values and calculates y-values
using the <code>np.sin</code> function and the supplied parameters. Finally, the x and y
values are plotted.</p>
<p>Below the function definition we use <code>interactive</code> with the <code>sine_curve</code> 
function as the first parameter. This means that the widgets will be tied to 
the <code>sine_curve</code> function. As you can see we also supply the <code>A</code>, <code>f</code> and <code>p</code> 
keyword arguments. Importantly, all parameters defined in the <code>sine_curve</code> 
function must be given in the <code>interactive</code> call and a widget is created for
each one. </p>
<p>Depending on the <code>type</code> of the passed argument different types of
widgets will be created by <code>interactive</code>. For instance: </p>
<ul>
<li><code>int</code> or <code>float</code> arguments will generate a slider</li>
<li><code>bool</code> arguments (True/False) will generate checkbox widgets</li>
<li><code>list</code> arguments will generate a dropdown</li>
<li><code>str</code> arguments will generate a text-box </li>
</ul>
<p>By supplying the arguments in the form of 
<a href="https://docs.python.org/3/library/stdtypes.html#typesseq">tuples</a> we can
adjust the properties of the sliders. <code>f=(1, 5, 1)</code> creates a widget with 
minimum value of <code>1</code>, maximum value of <code>5</code> and a step size of <code>1</code>. Try adjusting
these numbers in the <code>interactive</code> call to see how the sliders change (you have
to re-execute the cell).</p>
<p>The final line of the cell (<code>interactive_plot</code>) is where the actual widgets and 
plot are displayed. This code can be put in a separate cell, so that you can
define functions and widgets in one part of your notebook, and reuse them
somewhere else.</p>
<p>This is how it should look if everything works. You can now set the frequency
amplitude and phase of the sine curve by moving the sliders. </p>
<p><img alt="" src="images/jupyter_widget.png" />{ width=700px }</p>
<p>There are lots of widgets, <em>e.g.</em>:</p>
<ul>
<li>Dropdown menus</li>
<li>Toggle buttons</li>
<li>Range sliders</li>
<li>File uploader</li>
</ul>
<p>... and much, much more. Here is a <a href="https://ipywidgets.readthedocs.io/en/latest/examples/Widget%20List.html">list of all available widgets</a>
together with documentation and examples. Some of these widgets cannot be 
autogenerated by <code>interactive</code>, but fear not! Instead of relying on 
autogeneration we can define the widget and supply it directly to <code>interactive</code>.</p>
<p>To see this in practice, change out the <code>A</code> argument to a pre-defined
<code>IntSlider</code> widget. First define the slider:</p>
<pre><code class="language-python">from ipywidgets import widgets
A = widgets.IntSlider(value=2, min=1, max=5, step=1)
</code></pre>
<p>Then replace the call to <code>interactive</code> so that it looks like this:</p>
<pre><code class="language-python">interactive_plot = interactive(sine_curve, A=A, f=5, p=5)
</code></pre>
<h2 id="extra-challenge">Extra challenge<a class="headerlink" href="#extra-challenge" title="Permanent link">#</a></h2>
<p>If you can't get enough of widgets you might want to try this out: see if you
can figure out how to add a widget that lets you pick the color for the sine
curve line. Search for the appropriate widget in the <a href="https://ipywidgets.readthedocs.io/en/latest/examples/Widget%20List.html">Widget list</a>.
You'll need to update the <code>sine_curve</code> function and pass the new widget as
an argument in the call to <code>interactive</code>. If you need help, see the code chunk
below:</p>
<details>
<summary> Click to show </summary>


<pre><code class="language-python"># Import the interactive function from ipywidgets
from ipywidgets import interactive
# Also import numpy (for calculating the sine curve) 
# and pyplot from matplotlib for plotting
import numpy as np
from ipywidgets import widgets ## &lt;- import widgets
import matplotlib.pyplot as plt

# Define the function for plotting the sine curve
def sine_curve(A, f, p, color): ## &lt;- add parameter here
    # Set up the plot
    plt.figure(1, figsize=(4,4))
    # Create a range of 100 evenly spaced numbers between 0 and 100
    x = np.linspace(0,10,100)
    # Calculate the y values using the supplied parameters
    y = A*np.sin(x*f+p)
    # Plot the x and y values 
    plt.plot(x, y, color=color) ## &lt;- Use color from widget here
    plt.show()

# Here we supply the sine_curve function to interactive, 
# and set some limits on the input parameters
# Define the colorpicker widget
colorpicker = widgets.ColorPicker(description='color',value=&quot;red&quot;)
interactive_plot = interactive(sine_curve, 
            A=(1, 5, 1), 
            f=(0, 5, 1), 
            p=(1, 5, 0.5),
            color=colorpicker) ## &lt;- Supply the colorpicker to the function

# Display the widgets and the plot
interactive_plot
</code></pre>


</details>

<blockquote>
<p><strong>Attention!</strong> <br>
Note that you may have to close the color picker once you've made your 
choice in order to make the plot update.</p>
</blockquote>
<h2 id="other-interactive-plots">Other interactive plots<a class="headerlink" href="#other-interactive-plots" title="Permanent link">#</a></h2>
<p>Jupyter widgets, like we used here, is the most vanilla way of getting
interactive graphs in Jupyter notebooks. Some other alternatives are:</p>
<ul>
<li><a href="https://plot.ly/python/ipython-notebook-tutorial">Plotly</a> is actually an
  API to a web service that renders your graph and returns it for display in
  your Jupyter notebook. Generates very visually appealing graphs, but from
  a reproducibility perspective it's maybe not a good idea to be so reliant on
  a third party.</li>
<li><a href="https://bokeh.pydata.org/en/latest/docs/user_guide/notebook.html#userguide-notebook">Bokeh</a>
  is another popular tool for interactive graphs. Most plotting packages for
  Python are built on top of matplotlib, but Bokeh has its own library. This
  can give a steeper learning curve if you're used to the standard packages.</li>
<li><a href="http://mpld3.github.io">mpld3</a> tries to integrate matplotlib with
  Javascript and the D3js package. It doesn't scale well for very large
  datasets, but it's easy to use and works quite seamlessly.</li>
</ul>
<blockquote>
<p><strong>Quick recap</strong> <br>
In the three previous sections we've learned:</p>
<ul>
<li>How to implement interactive widgets in notebooks</li>
</ul>
</blockquote>

			<br>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../jupyter-4-plotting/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../jupyter-4-plotting/" class="btn btn-sm btn-link">
			Plotting
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../jupyter-6-extensions/" class="btn btn-sm btn-link">
			Extensions
		</a>
		<a href="../jupyter-6-extensions/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			<br>
		</div>

		<footer class="container-fluid wm-page-content text-center small">
			<p>
			<a href="https://github.com/Juke34/workshop-reproducible-research/edit/master/docs/jupyter/jupyter-5-widgets.md" target="_blank">Edit on workshop-reproducible-research</a>
			</p>
			<details>
				<summary>
					Documentation built with <a href="http://www.mkdocs.org/" target="_blank">MkDocs</a> using  <a href="https://github.com/Siphalor/mkdocs-custommill" target="_blank">CustomMill</a>.
				</summary>
				<h6 class="mt-2">Additional Licenses</h6>
				<ul><li>
						CustomMill is based on the <a href="https://github.com/gristlabs/mkdocs-windmill" target="_blank">Windmill</a> theme by Grist Labs, licensed under the <a href="https://github.com/gristlabs/mkdocs-windmill/blob/master/LICENSE" target="_blank">MIT License</a>
					</li>
					<li>
						CustomMill includes <a href="https://getbootstrap.com" target="_blank">Bootstrap</a> version 5.1.3. This is available under the <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" target="_blank">MIT License</a>.
					</li>
					<li>
						Syntax highlighting is implemented via <a href="https://highlightjs.org" target="_blank">highlight.js</a> licensed under the BSD 3-Clause License and the included github styling made by Vasily Polovnyov.
					</li>
					<li>
						Icons on this site are from <a href="https://fontawesome.com/" target="_blank">Font Awesome</a> which is licensed under the <a href="https://fontawesome.com/license/free" target="_blank">Font Awesome Free License</a>.
					</li></ul>
				<p>Built at 2023-02-10 16:41:13 UTC</p>
			</details>
		</footer>

		
	</body>
</html>