<!DOCTYPE html>
<html lang="en">
	<head>
		
		
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<meta name="author" content="Jacques Dainat et al.">
		<link rel="canonical" href="https://Juke34.github.io/workshop-reproducible-research/containers/containers-8-extra-material/">
		<link rel="shortcut icon" href="../../img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>Extra material - Bioinformatics Workshop on Tools for Reproducible Research</title>
		<link href="../../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="../../css/font-awesome-5.12.2-all.min.css" rel="stylesheet">
		<link href="../../css/base.css" rel="stylesheet">
		<link rel="stylesheet" href="../../css/highlight-github.css">
		<script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="../../js/highlight.pack.js"></script>
		
		<script>
			var base_url = '../..';
			var home_url = '../../usage';
			var is_outer_page = false;
			
			var pageToc = [
				{title: "A base image with Conda", url: "#_top", children: [
				]},
			];

		</script>
		<script src="../../js/base.js"></script> 
	</head>

	<body class="inner-page">
		

		<div class="container-fluid wm-page-content">
			<a name="_top" aria-hidden="true"></a>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../containers-7-singularity/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../containers-7-singularity/" class="btn btn-sm btn-link">
			Singularity
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../../project/project/" class="btn btn-sm btn-link">
			Making a project reproducible
		</a>
		<a href="../../project/project/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			

			<p>Containers can be large and complicated, but once you start using them regularly
you'll find that you start understand these complexities. There are lots of
different things you can do with images and containers in general, especially
when it comes to optimising build time or final image size. Here is some small
tips and tricks that you can be inspired from!</p>
<p>If you want to read more about containers in general you can check out these
resources:</p>
<ul>
<li>A "Get started with Docker" at <a href="https://docs.docker.com/get-started/">docker.com</a>.</li>
<li>An <a href="https://arxiv.org/abs/1410.0846">early paper</a> on the subject of using
  Docker for reproducible research.</li>
</ul>
<h2 id="a-base-image-with-conda">A base image with Conda<a class="headerlink" href="#a-base-image-with-conda" title="Permanent link">#</a></h2>
<p>We've used Conda throughout this container tutorial, and we did it by
installing Conda inside the image when we built it. Wouldn't it be nice if we
didn't have to do this particular step? After all, installing Conda is just
busy-work, compared to installing the actual environment that we want to use
for the analyses. Luckily, there are already container images out there that
have Conda (and <a href="conda-4-extra-material">Mamba</a>) installed, such as the ones
over at <code>condaforge/mambaforge</code>! What follows is a Dockerfile that you could
use instead of the ones described above to install things using a Conda
<code>environment.yml</code> file, without having to install Conda in the Docker image
when building it!</p>
<pre><code class="language-no-highlight">FROM condaforge/mambaforge:4.10.1-0
LABEL description = &quot;Image description&quot;
MAINTAINER &quot;Firstname Lastname&quot; firstname.lastname@gmail.se

# Use bash as shell
SHELL [&quot;/bin/bash&quot;, &quot;-c&quot;]

# Set working directory
WORKDIR /project

# Copy and install the Conda environment
COPY environment.yml ./
RUN conda config --set channel_priority strict \
    &amp;&amp; mamba env update --name base --file environment.yml \
    &amp;&amp; mamba clean --all --force-pkgs-dirs --yes

# Start Bash shell by default
CMD /bin/bash
</code></pre>

			<br>
			






<div class="row pt-2 pb-4">
	<div class="col-sm text-center text-sm-left">
		<a href="../containers-7-singularity/" class="btn btn-sm btn-outline-dark">
			<i class="fa fa-chevron-left" aria-hidden="true"></i>
			Previous
		</a>
		<a href="../containers-7-singularity/" class="btn btn-sm btn-link">
			Singularity
		</a>
	</div>
	

	
	<div class="col-sm text-center text-sm-right">
		<a href="../../project/project/" class="btn btn-sm btn-link">
			Making a project reproducible
		</a>
		<a href="../../project/project/" class="btn btn-sm btn-outline-dark">
			Next
			<i class="fa fa-chevron-right" aria-hidden="true"></i>
		</a>
	</div>
	
</div>

			<br>
		</div>

		<footer class="container-fluid wm-page-content text-center small">
			<p>
			<a href="https://github.com/Juke34/workshop-reproducible-research/edit/master/docs/containers/containers-8-extra-material.md" target="_blank">Edit on workshop-reproducible-research</a>
			</p>
			<details>
				<summary>
					Documentation built with <a href="http://www.mkdocs.org/" target="_blank">MkDocs</a> using  <a href="https://github.com/Siphalor/mkdocs-custommill" target="_blank">CustomMill</a>.
				</summary>
				<h6 class="mt-2">Additional Licenses</h6>
				<ul><li>
						CustomMill is based on the <a href="https://github.com/gristlabs/mkdocs-windmill" target="_blank">Windmill</a> theme by Grist Labs, licensed under the <a href="https://github.com/gristlabs/mkdocs-windmill/blob/master/LICENSE" target="_blank">MIT License</a>
					</li>
					<li>
						CustomMill includes <a href="https://getbootstrap.com" target="_blank">Bootstrap</a> version 5.1.3. This is available under the <a href="https://github.com/twbs/bootstrap/blob/master/LICENSE" target="_blank">MIT License</a>.
					</li>
					<li>
						Syntax highlighting is implemented via <a href="https://highlightjs.org" target="_blank">highlight.js</a> licensed under the BSD 3-Clause License and the included github styling made by Vasily Polovnyov.
					</li>
					<li>
						Icons on this site are from <a href="https://fontawesome.com/" target="_blank">Font Awesome</a> which is licensed under the <a href="https://fontawesome.com/license/free" target="_blank">Font Awesome Free License</a>.
					</li></ul>
				<p>Built at 2023-02-10 16:41:13 UTC</p>
			</details>
		</footer>

		
	</body>
</html>